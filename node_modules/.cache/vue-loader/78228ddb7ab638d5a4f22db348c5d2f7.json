{"remainingRequest":"D:\\Project\\front\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Project\\front\\vue-element-admin\\src\\views\\components-demo\\test.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\Project\\front\\vue-element-admin\\src\\views\\components-demo\\test.vue","mtime":1594178182686},{"path":"D:\\Project\\front\\vue-element-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Project\\front\\vue-element-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Project\\front\\vue-element-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Project\\front\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Project\\front\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI2FwcCB7DQogIGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCg=="},{"version":3,"sources":["test.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0NA;AACA;AACA;AACA","file":"test.vue","sourceRoot":"src/views/components-demo","sourcesContent":["<template>\r\n  <div id=\"app-container\" style=\"margin:10px\">\r\n      <br/>\r\n    <el-row>\r\n      <el-col :span=\"1\" class=\"grid\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"addFlag=true;dialogVisible = true \"\r\n          size=\"mini\"\r\n          plain=\"\"\r\n        >新增</el-button>\r\n      </el-col> \r\n      <el-col :span=\"3\" class=\"grid\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"addFlag=true;dialogVisible = true \"\r\n          size=\"mini\"\r\n          plain\r\n        >修改</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <br />\r\n    <el-table\r\n      :data=\"bookList\"\r\n      border\r\n      style=\"width: 100%\"\r\n      stripe\r\n      ref=\"multipleTable\"\r\n      tooltip-effect=\"dark\"\r\n    >\r\n      <el-table-column label=\"序号\" type=\"index\" width=\"80px\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{(page - 1) * size + scope.$index + 1}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"Name\" label=\"书名\"></el-table-column>\r\n      <el-table-column prop=\"Author\" label=\"作者\"></el-table-column>\r\n      <el-table-column prop=\"Type\" label=\"种类\"></el-table-column>\r\n      <el-table-column prop=\"Count\" label=\"数量\"></el-table-column>\r\n      <el-table-column label=\"编辑\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"editBook(scope.row)\">编辑</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"删除\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"delBook(scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"page\"\r\n      :page-sizes=\"[5, 10, 20]\"\r\n      :page-size=\"size\"\r\n      style=\"float:right\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n    <el-dialog\r\n      :title=\"addFlag?'新增图书':'修改图书'\"\r\n      style=\"text-align:left !important\"\r\n      :visible.sync=\"dialogVisible\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <el-form ref=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"书名\" style=\"width:300px\">\r\n          <el-input v-model=\"book.Name\" placeholder=\"请输入昵称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"作者\" style=\"width:280px\">\r\n          <el-input v-model=\"book.Author\" placeholder=\"请输入作者名\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"种类\" style=\"width:230px\">\r\n          <el-input v-model=\"book.Type\" placeholder=\"请输入种类\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"库存\" style=\"width:190px\">\r\n          <el-input v-model=\"book.Count\" placeholder=\"请输入库存\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"success\" @click=\"saveBook()\">提交</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\">取消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"提示\"\r\n      style=\"text-align:left !important\"\r\n      :visible.sync=\"dialog2Visible\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <span>你确定要删除这本图书吗?</span>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleDel()\">提交</el-button>\r\n        <el-button type=\"primary\" @click=\"dialog2Visible = false\">取消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport qs from \"qs\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      dialog2Visible: false,\r\n      activeIndex2: \"1\",\r\n      total: 0,\r\n      size: 5,\r\n      page: 1,\r\n      bookList: [],\r\n      book: {},\r\n      addFlag: true,\r\n      curId: \"\"\r\n    };\r\n  },\r\n  watch:{\r\n    //2.x版本的bug 以前用1.x发现没有 假如现在是第三页，只有一条数据了。将其删除，就没有第三页了。应该跳到第二页展示出5条数据。\r\n    //可是数据没有展示。原因是获取list的时候page参数没有改变。依然是3\r\n      total(){\r\n        if(this.total==(this.page-1)*this.size&& this.total!=0){\r\n          this.page-=1;\r\n          this.getBookList()\r\n        }\r\n      }\r\n    },\r\n  methods: {\r\n    handleClose(done) {\r\n      done();\r\n    },\r\n    handleSizeChange(val){\r\n      this.size = val\r\n      this.getBookList()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n      this.getBookList();\r\n    },\r\n    async getBookList() {\r\n      try {\r\n        let res = await axios.post(\r\n          \"http://127.0.0.1:8848/api/v1/book/list\",\r\n          qs.stringify({\r\n            page: this.page,\r\n            size: this.size\r\n          })\r\n        );\r\n        this.total = res.data.Data.Total;\r\n        this.bookList = res.data.Data.List;\r\n        \r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    async saveBook() {\r\n      try {\r\n        let res = await axios.post(\r\n          \"http://127.0.0.1:8848/api/v1/book/save\",\r\n          qs.stringify({\r\n            id: this.book.ID,\r\n            name: this.book.Name,\r\n            type: this.book.Type,\r\n            author: this.book.Author,\r\n            count: this.book.Count\r\n          })\r\n        );\r\n        this.dialogVisible = false;\r\n        this.book = {};\r\n        this.$message({\r\n          message: res.data.Msg,\r\n          type: \"success\"\r\n        });\r\n        this.getBookList();\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    delBook(row) {\r\n      this.addFlag = false;\r\n      this.dialog2Visible = true;\r\n      this.curId = row.ID;\r\n    },\r\n    async handleDel() {\r\n      try {\r\n        let res = await axios.post(\r\n          \"http://127.0.0.1:8848/api/v1/book/del\",\r\n          qs.stringify({\r\n            id: this.curId\r\n          })\r\n        );\r\n        this.curId = \"\";\r\n        this.dialog2Visible = false;\r\n        this.$message({\r\n          message: res.data.Msg,\r\n          type: \"success\"\r\n        });\r\n        this.getBookList();\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    editBook(row) {\r\n      this.book = row;\r\n      this.dialogVisible = true;\r\n      this.addFlag = false;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getBookList();\r\n  },\r\n\r\n\r\n};\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Helvetica, sans-serif;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}